<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  
  <title>Compress Image to 20kb, 50kb, 100kb | XIZOAHUB Custom Tools</title>
  <meta name="title" content="Compress Image to 20kb, 50kb, 100kb | XIZOAHUB Custom Tools">
  <meta name="description" content="Free online image compressor with custom widgets. Reduce size to 20kb, 50kb, 100kb instantly. Best for SSC, UPSC, IBPS forms. Created by Priyanshu.">
  <meta name="keywords" content="compress image to 20kb, photo under 50kb, ssc photo resizer, jpg size reducer, online image compressor custom size, reduce image size in kb, XIZOAHUB tools">
  <meta name="author" content="Priyanshu - XIZOAHUB">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="revisit-after" content="1 days">
  <meta name="language" content="English">
  <link rel="canonical" href="https://www.xizoahub.com/p/image-compressor.html" />

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.xizoahub.com/p/image-compressor.html">
  <meta property="og:title" content="Compress Image to 20kb, 50kb | XIZOAHUB">
  <meta property="og:description" content="Reduce image size for Govt Exams (SSC, UPSC). Free, Fast & Secure. Created by Priyanshu.">
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/a/AVvXsEg0N3KGGvX4Wbu4h_BOmdyaq1_gvmFiS_VjaB9jOvwlFFGuRLzQIMwqkeeOBmBlu6g8ZHXm7DJk2ehQRXN-XqQB-H0QG4Odr2tbtbuLCRGM9jABYdGwrDmSCSnPGELp9CJsqNP1j6vuxgjJF6BbZCYdqr0roY7vAMFg1qrL5r0r69CcCi5uZytB-YgMWdZp">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="en_IN">
  <meta property="og:site_name" content="XIZOAHUB Tools">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://www.xizoahub.com/p/image-compressor.html">
  <meta name="twitter:title" content="Compress Image to 20kb, 50kb | XIZOAHUB">
  <meta name="twitter:description" content="Free tool to resize photos for online forms. No quality loss.">
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/a/AVvXsEg0N3KGGvX4Wbu4h_BOmdyaq1_gvmFiS_VjaB9jOvwlFFGuRLzQIMwqkeeOBmBlu6g8ZHXm7DJk2ehQRXN-XqQB-H0QG4Odr2tbtbuLCRGM9jABYdGwrDmSCSnPGELp9CJsqNP1j6vuxgjJF6BbZCYdqr0roY7vAMFg1qrL5r0r69CcCi5uZytB-YgMWdZp">

  <meta name="geo.region" content="IN-UP">
  <meta name="geo.placename" content="Varanasi">
  <meta name="geo.position" content="25.3176;82.9739">
  <meta name="ICBM" content="25.3176, 82.9739">

  <meta name="theme-color" content="#020617">
  <meta name="msapplication-navbutton-color" content="#020617">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "XIZOAHUB Image Widget Tool",
    "headline": "Compress Image to 20kb, 50kb Online Free",
    "image": "https://blogger.googleusercontent.com/img/a/AVvXsEg0N3KGGvX4Wbu4h_BOmdyaq1_gvmFiS_VjaB9jOvwlFFGuRLzQIMwqkeeOBmBlu6g8ZHXm7DJk2ehQRXN-XqQB-H0QG4Odr2tbtbuLCRGM9jABYdGwrDmSCSnPGELp9CJsqNP1j6vuxgjJF6BbZCYdqr0roY7vAMFg1qrL5r0r69CcCi5uZytB-YgMWdZp",
    "creator": { 
      "@type": "Person", 
      "name": "Priyanshu",
      "url": "https://www.xizoahub.com"
    },
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Web Browser",
    "offers": { 
      "@type": "Offer", 
      "price": "0",
      "priceCurrency": "INR" 
    },
    "description": "Custom widget tool to compress images to exact sizes like 20kb or 50kb for online forms.",
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "1024"
    }
  }
  </script>

  <style>
    :root {
      --bg-dark: #020617;
      --card-bg: #0f172a;
      --primary: #00e5ff; /* Cyan Neon */
      --primary-hover: #38bdf8;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --border: rgba(56, 189, 248, 0.3);
      --success: #22c55e;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, sans-serif; }

    body {
      background: var(--bg-dark);
      color: var(--text);
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* --- RESPONSIVE HEADER --- */
    header {
      background: rgba(15, 23, 42, 0.98);
      border-bottom: 1px solid var(--border);
      padding: 0.8rem 0;
      position: sticky; top: 0; z-index: 50;
      box-shadow: 0 4px 20px rgba(0, 229, 255, 0.1);
    }
    .nav { 
      max-width: 1000px; margin: 0 auto; padding: 0 1rem; 
      display: flex; justify-content: space-between; align-items: center; 
    }
    
    .logo-area { display: flex; align-items: center; gap: 10px; }
    .logo-img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary); object-fit: cover; }
    .logo-text { font-size: 1.3rem; font-weight: 800; color: var(--primary); letter-spacing: 1px; }

    /* --- MAIN CONTAINER --- */
    .container { max-width: 900px; margin: 2rem auto; padding: 0 1rem; flex: 1; width: 100%; }

    .hero-title { text-align: center; margin-bottom: 2rem; }
    .hero-title h1 { font-size: clamp(1.8rem, 5vw, 2.8rem); margin-bottom: 0.5rem; line-height: 1.2; }
    .hero-title span { color: var(--primary); background: rgba(0, 229, 255, 0.1); padding: 0 10px; border-radius: 8px; white-space: nowrap; }
    .hero-title p { color: var(--text-muted); font-size: 1.1rem; margin-top: 0.5rem; }

    /* --- TOOL CARD (Fixed Width Issues) --- */
    .tool-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 0 50px rgba(0, 229, 255, 0.05);
      position: relative;
      overflow: hidden;
    }

    /* --- WIDGETS --- */
    .widget-label { text-align: center; color: var(--text-muted); font-size: 0.9rem; margin-bottom: 0.8rem; }
    .widget-container {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 0.8rem; margin-bottom: 2rem;
    }
    .widget-btn {
      flex: 1 1 auto;
      min-width: 100px;
      max-width: 150px;
      text-align: center;
      background: #1e293b; border: 1px solid var(--border); color: #fff;
      padding: 0.7rem; border-radius: 50px; cursor: pointer; transition: 0.3s;
      font-size: 0.9rem; font-weight: 600;
    }
    .widget-btn:hover, .widget-btn.active {
      background: var(--primary); color: #000; box-shadow: 0 0 15px rgba(0, 229, 255, 0.4); border-color: var(--primary);
    }

    /* --- CONTROL BAR (Responsive Grid) --- */
    .control-bar {
      display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;
      background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 1rem;
      border: 1px solid rgba(255,255,255,0.05); margin-bottom: 1.5rem;
    }

    .input-group { display: flex; flex-direction: column; gap: 0.5rem; flex: 1; min-width: 200px; }
    .input-group label { font-size: 0.9rem; color: var(--primary); font-weight: 700; }
    
    .input-style {
      width: 100%;
      background: #020617; border: 1px solid var(--border); color: #fff;
      padding: 0.8rem; border-radius: 0.6rem; font-size: 1.1rem; text-align: center; outline: none; transition: 0.3s;
    }
    .input-style:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(0, 229, 255, 0.2); }

    /* --- UPLOAD AREA --- */
    .upload-area {
      border: 2px dashed var(--border); border-radius: 1rem; padding: 2.5rem 1rem;
      text-align: center; cursor: pointer; transition: 0.3s;
      background: rgba(0, 229, 255, 0.02); margin-bottom: 1.5rem;
    }
    .upload-area:hover { border-color: var(--primary); background: rgba(0, 229, 255, 0.08); }
    
    /* --- MAIN BUTTON --- */
    .btn-main {
      width: 100%; background: linear-gradient(90deg, var(--primary), #22d3ee);
      color: #000; font-weight: 800; font-size: 1.2rem; padding: 1.2rem;
      border: none; border-radius: 1rem; cursor: pointer;
      box-shadow: 0 0 25px rgba(0, 229, 255, 0.3); transition: transform 0.2s;
    }
    .btn-main:hover { transform: translateY(-3px); }
    .btn-main:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; }

    /* --- RESULT AREA --- */
    #resultArea { margin-top: 2rem; display: none; animation: slideUp 0.5s ease; }
    @keyframes slideUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

    .result-box {
      background: #020617; border: 1px solid var(--success); padding: 1.5rem;
      border-radius: 1rem; text-align: center;
    }
    .size-comp { 
      display: flex; justify-content: center; align-items: center; gap: 2rem; 
      margin-bottom: 1.5rem; color: var(--text-muted); font-size: 1rem; 
    }
    .size-val { color: #fff; font-size: 1.3rem; font-weight: bold; display: block; margin-top: 5px; }
    
    .btn-download {
      display: inline-block; background: var(--success); color: #000;
      padding: 1rem 2rem; border-radius: 50px; text-decoration: none;
      font-weight: 700; font-size: 1.1rem; cursor: pointer;
      box-shadow: 0 5px 20px rgba(34, 197, 94, 0.3); transition: 0.2s;
      width: 100%; max-width: 300px;
    }
    .btn-download:hover { transform: scale(1.05); box-shadow: 0 8px 25px rgba(34, 197, 94, 0.5); }

    /* --- SEO CONTENT (Preserved) --- */
    .seo-section { margin-top: 5rem; background: rgba(15, 23, 42, 0.6); padding: 2rem; border-radius: 1.5rem; border: 1px solid rgba(255,255,255,0.05); overflow-x: hidden; }
    .seo-section h2 { color: var(--primary); margin-bottom: 1.2rem; font-size: 1.6rem; margin-top: 2rem; border-left: 4px solid var(--primary); padding-left: 10px; }
    .seo-section h3 { color: #fff; margin-bottom: 0.8rem; font-size: 1.2rem; margin-top: 1.5rem; }
    .seo-section p, .seo-section li { color: var(--text-muted); margin-bottom: 1rem; font-size: 1rem; line-height: 1.7; }
    .seo-section ul, .seo-section ol { margin-left: 1.5rem; }

    /* Table Responsive Fix */
    .table-responsive { overflow-x: auto; }
    .data-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; min-width: 300px; }
    .data-table th, .data-table td { border: 1px solid var(--border); padding: 0.8rem; text-align: left; color: var(--text-muted); }
    .data-table th { background: rgba(0, 229, 255, 0.1); color: var(--primary); }

    /* --- FOOTER --- */
    footer { border-top: 1px solid var(--border); background: #0a0f1d; padding: 3rem 1rem; margin-top: 4rem; }
    .footer-content { max-width: 1000px; margin: 0 auto; display: flex; flex-wrap: wrap; gap: 2rem; justify-content: space-between; align-items: center; }
    
    .creator-profile { display: flex; align-items: center; gap: 15px; }
    .footer-avatar { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary); object-fit: cover; }
    .creator-info h4 { color: #fff; font-size: 1.1rem; margin-bottom: 2px; }
    .creator-info span { color: var(--primary); font-size: 0.9rem; font-weight: bold; }
    .creator-info p { color: var(--text-muted); font-size: 0.8rem; }

    .footer-links { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
    .footer-links a { color: var(--text-muted); text-decoration: none; font-size: 0.9rem; transition: 0.3s; }
    .footer-links a:hover { color: var(--primary); text-decoration: underline; }

    /* --- MOBILE SPECIFIC FIXES --- */
    @media(max-width: 600px) {
      .container { padding: 0 0.5rem; }
      .tool-card { padding: 1.5rem 1rem; border-radius: 1rem; }
      .control-bar { flex-direction: column; padding: 1rem; }
      .input-group { min-width: 100%; }
      .size-comp { flex-direction: column; gap: 1rem; }
      .footer-content { flex-direction: column; text-align: center; }
      .creator-profile { flex-direction: column; }
      .nav { padding: 0.5rem 1rem; }
      .logo-text { font-size: 1.1rem; }
      .widget-btn { padding: 0.8rem; font-size: 0.85rem; } 
    }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <div class="logo-area">
      <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg0N3KGGvX4Wbu4h_BOmdyaq1_gvmFiS_VjaB9jOvwlFFGuRLzQIMwqkeeOBmBlu6g8ZHXm7DJk2ehQRXN-XqQB-H0QG4Odr2tbtbuLCRGM9jABYdGwrDmSCSnPGELp9CJsqNP1j6vuxgjJF6BbZCYdqr0roY7vAMFg1qrL5r0r69CcCi5uZytB-YgMWdZp" class="logo-img" alt="XIZOAHUB Logo">
      <div class="logo-text">XIZOAHUB</div>
    </div>
    <div style="font-size:0.8rem; color:var(--text-muted)">Secure & Free</div>
  </div>
</header>

<main class="container">
  
  <div class="hero-title">
    <h1>Compress Image to <br><span id="dynamicHeader">Any Custom Size</span></h1>
    <p>Select a widget or enter your own size. 20KB, 50KB, 100KB - It's your choice.</p>
  </div>

  <div class="tool-card">
    
    <p class="widget-label">‚ö° Quick Select Widgets (Auto-Set)</p>
    <div class="widget-container">
      <button class="widget-btn" onclick="setWidget(20)">SSC (20KB)</button>
      <button class="widget-btn active" onclick="setWidget(50)">UPSC (50KB)</button>
      <button class="widget-btn" onclick="setWidget(100)">Docs (100KB)</button>
      <button class="widget-btn" onclick="setWidget(200)">High (200KB)</button>
    </div>

    <div class="control-bar">
      <div class="input-group">
        <label>üéØ Custom Target (KB)</label>
        <input type="number" id="targetKB" value="50" min="5" max="5000" class="input-style" placeholder="Enter Size">
      </div>
      
      <div class="input-group">
        <label>üñºÔ∏è Output Format</label>
        <select id="formatSelect" class="input-style">
          <option value="image/jpeg">JPG (Best for Govt Forms)</option>
          <option value="image/webp">WebP (Best for SEO)</option>
          <option value="image/png">PNG</option>
        </select>
      </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" style="display:none">
    <div class="upload-area" id="dropArea" onclick="document.getElementById('fileInput').click()">
      <div style="font-size:3.5rem; margin-bottom:0.5rem;">üìÇ</div>
      <h3 style="color:white; margin-bottom:0.5rem;">Click to Upload Image</h3>
      <p style="font-size:0.9rem; color:var(--text-muted)">Supports JPG, PNG, WebP</p>
    </div>

    <button id="compressBtn" class="btn-main" disabled>Start Compression üöÄ</button>

    <div id="resultArea">
      <div class="result-box">
        <h3 style="color:var(--success); margin-bottom:1.5rem;">‚ú® Image Compressed Successfully!</h3>
        
        <div class="size-comp">
          <div>Original File<span class="size-val" id="origSize">0 KB</span></div>
          <div style="font-size:2rem; color:var(--primary)">‚ûù</div>
          <div>Compressed File<span class="size-val" id="newSize" style="color:var(--primary)">0 KB</span></div>
        </div>

        <a id="downloadLink" class="btn-download" href="#" target="_blank">Download Image ‚¨á</a>
        
        <div style="margin-top:1.5rem;">
          <button onclick="resetTool()" style="background:transparent; border:none; color:var(--text-muted); cursor:pointer; text-decoration:underline;">Compress Another Photo</button>
        </div>
      </div>
    </div>

  </div>

  <article class="seo-section">
    <h2>Best Online Image Compressor with Custom Widgets</h2>
    <p>Welcome to <strong>XIZOAHUB</strong>, the only tool created by <strong>Priyanshu</strong> that gives you full control over your image size. Unlike other tools where you just guess the quality, here you can use our <strong>Smart Widgets</strong> to instantly select the size you need.</p>
    
    <p>Whether you need a <em>passport size photo under 20kb</em> for SSC exams, or a <em>signature under 10kb</em> for UPSC, or simply want to optimize images for your website, this tool handles it all locally on your device.</p>

    <h3>Why Use XIZOAHUB Custom Tool?</h3>
    <div class="table-responsive">
      <table class="data-table">
        <tr>
          <th>Feature</th>
          <th>XIZOAHUB</th>
          <th>Others</th>
        </tr>
        <tr>
          <td>Custom KB Input</td>
          <td>‚úÖ Yes (Type any size)</td>
          <td>‚ùå No</td>
        </tr>
        <tr>
          <td>One-Click Widgets</td>
          <td>‚úÖ Yes (20, 50, 100KB)</td>
          <td>‚ùå No</td>
        </tr>
        <tr>
          <td>Privacy</td>
          <td>‚úÖ 100% Client-Side</td>
          <td>‚ùå Server Uploads</td>
        </tr>
      </table>
    </div>

    <h3>How to Compress Image to 50KB?</h3>
    <ol>
      <li><strong>Select a Widget:</strong> Click on the "50KB (UPSC)" button above. Or type "50" in the custom box.</li>
      <li><strong>Upload Photo:</strong> Click the folder icon and choose your JPG or PNG file.</li>
      <li><strong>Process:</strong> Hit the "Start Compression" button. Our smart algorithm checks the size and adjusts quality automatically.</li>
      <li><strong>Download:</strong> Get your exact 50KB image instantly.</li>
    </ol>

    <h3>Supported Documents</h3>
    <ul>
      <li><strong>SSC CGL/CHSL:</strong> Requires Photo (20-50KB) and Signature (10-20KB).</li>
      <li><strong>UPSC Civil Services:</strong> Requires Photo under 300KB but greater than 20KB.</li>
      <li><strong>PAN Card / Aadhaar:</strong> Specific dimension and size limits.</li>
    </ul>

    <h3>Frequently Asked Questions</h3>
    <p><strong>Q: Who created this tool?</strong><br>This tool is designed and developed by Priyanshu for XIZOAHUB.</p>
    <p><strong>Q: Is my data safe?</strong><br>Yes. No image is sent to any server. Everything happens in your browser.</p>
  </article>

</main>

<footer>
  <div class="footer-content">
    <div class="creator-profile">
      <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg0N3KGGvX4Wbu4h_BOmdyaq1_gvmFiS_VjaB9jOvwlFFGuRLzQIMwqkeeOBmBlu6g8ZHXm7DJk2ehQRXN-XqQB-H0QG4Odr2tbtbuLCRGM9jABYdGwrDmSCSnPGELp9CJsqNP1j6vuxgjJF6BbZCYdqr0roY7vAMFg1qrL5r0r69CcCi5uZytB-YgMWdZp" class="footer-avatar" alt="Priyanshu">
      <div class="creator-info">
        <h4>image compressor tool</h4>
        <p>Created by <span>XIZOAHUB TOOLS</span></span></p>
        <p style="margin-top:5px; max-width:250px;">A free utility to help students and creators compress images securely.</p>
      </div>
    </div>

    <div class="footer-links">
      <a href="/p/about-us.html">About Us</a>
      <a href="/p/contact-us.html">Contact</a>
      <a href="/p/privacy-policy.html">Privacy Policy</a>
      <a href="/p/disclaimer.html">Disclaimer</a>
    </div>

  </div>
  <div style="text-align:center; margin-top:2rem; color:#64748b; font-size:0.8rem;">
    &copy; 2025 XIZOAHUB. All rights reserved.
  </div>
</footer>

<script>
  const fileInput = document.getElementById('fileInput');
  const targetInput = document.getElementById('targetKB');
  const compressBtn = document.getElementById('compressBtn');
  const dropArea = document.getElementById('dropArea');
  const resultArea = document.getElementById('resultArea');
  const downloadLink = document.getElementById('downloadLink');
  const dynamicHeader = document.getElementById('dynamicHeader');
  const widgetBtns = document.querySelectorAll('.widget-btn');
  
  let currentFile = null;

  function setWidget(kb) {
    targetInput.value = kb;
    dynamicHeader.innerText = kb + " KB Target";
    widgetBtns.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
  }

  fileInput.addEventListener('change', (e) => {
    if(e.target.files[0]) {
      currentFile = e.target.files[0];
      dropArea.innerHTML = `<div style="font-size:3rem">‚úÖ</div><h3 style="color:white">${currentFile.name}</h3><p style="font-size:0.9rem; color:#94a3b8">Ready to Process</p>`;
      dropArea.style.borderColor = "#22c55e";
      dropArea.style.background = "rgba(34, 197, 94, 0.05)";
      compressBtn.disabled = false;
      resultArea.style.display = 'none';
    }
  });

  compressBtn.addEventListener('click', async () => {
    if (!currentFile) return;
    compressBtn.innerText = "Processing... Please Wait";
    compressBtn.disabled = true;

    const targetKB = parseInt(targetInput.value);
    const targetBytes = targetKB * 1024;
    const format = document.getElementById('formatSelect').value;

    try {
      const result = await smartCompress(currentFile, targetBytes, format);
      document.getElementById('origSize').innerText = (currentFile.size / 1024).toFixed(1) + " KB";
      document.getElementById('newSize').innerText = (result.blob.size / 1024).toFixed(1) + " KB";
      
      let ext = format.split('/')[1];
      if(ext === 'jpeg') ext = 'jpg';
      let newName = currentFile.name.substring(0, currentFile.name.lastIndexOf('.')) + '_XIZOAHUB.' + ext;

      const url = URL.createObjectURL(result.blob);
      downloadLink.href = url;
      downloadLink.download = newName;
      
      resultArea.style.display = 'block';
      compressBtn.innerText = "Start Compression üöÄ";
      compressBtn.disabled = false;

    } catch (error) {
      alert("Error: " + error);
      compressBtn.innerText = "Try Again";
      compressBtn.disabled = false;
    }
  });

  function resetTool() {
    fileInput.value = '';
    currentFile = null;
    dropArea.innerHTML = `<div style="font-size:3.5rem; margin-bottom:0.5rem;">üìÇ</div><h3 style="color:white; margin-bottom:0.5rem;">Click to Upload Image</h3><p style="font-size:0.9rem; color:var(--text-muted)">Supports JPG, PNG, WebP</p>`;
    dropArea.style.borderColor = "rgba(56, 189, 248, 0.3)";
    dropArea.style.background = "rgba(0, 229, 255, 0.02)";
    resultArea.style.display = 'none';
    compressBtn.disabled = true;
    downloadLink.href = "#";
  }

  async function smartCompress(file, targetBytes, format) {
    let minQ = 0.01;
    let maxQ = 1.0;
    let bestBlob = null;
    let attempts = 0;

    const img = await loadImage(file);
    const canvas = document.createElement('canvas');
    canvas.width = img.width;
    canvas.height = img.height;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);

    while (attempts < 8) {
      let midQ = (minQ + maxQ) / 2;
      let blob = await canvasToBlob(canvas, format, midQ);

      if (blob.size <= targetBytes) {
        bestBlob = blob;
        minQ = midQ; 
      } else {
        maxQ = midQ;
      }
      if (maxQ - minQ < 0.02) break;
      attempts++;
    }

    if (!bestBlob) bestBlob = await canvasToBlob(canvas, format, 0.1); 
    return { blob: bestBlob };
  }

  function loadImage(file) {
    return new Promise((resolve) => {
      const img = new Image();
      img.src = URL.createObjectURL(file);
      img.onload = () => resolve(img);
    });
  }

  function canvasToBlob(canvas, type, quality) {
    return new Promise(resolve => canvas.toBlob(resolve, type, quality));
  }
</script>
<script type="text/javascript" src="//pl28213270.effectivegatecpm.com/2e/9e/e0/2e9ee0b8623b87d872feec78dfac8e0c.js"></script>
</body>
</html>